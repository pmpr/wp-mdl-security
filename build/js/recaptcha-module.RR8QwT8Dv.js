/*! For license information please see recaptcha-module.RR8QwT8Dv.js.LICENSE.txt */
(()=>{"use strict";class e{onInit;onReset;element=null;onExpired;onVerified;constructor(e={}){const t=PRHelper.getType(),i=PRHelper.getSetting();this.sitekey=i.getOption("recaptcha.sitekey",""),this.version=i.getOption("recaptcha.version","v2"),t.each(e,((e,i)=>{this.hasOwnProperty(i)&&t.isEmpty(this[i])&&(this[i]=e)}))}async init(){this.beforeStart(),await this.loadScript(),await this.render()}beforeStart(){"function"==typeof this.onInit&&this.onInit(this.element)}loadScript(){return new Promise(((e,t)=>{if(window.grecaptcha)return e();const i=document.createElement("script");i.src="v3"===this.version?`https://www.google.com/recaptcha/api.js?render=${this.sitekey}`:"https://www.google.com/recaptcha/api.js?render=explicit",i.async=!0,i.defer=!0,i.onload=()=>e(),i.onerror=e=>t(e),PRHelper.getHTML().append(i,document.head)}))}async render(){if("v2"===this.version){if(!this.element)return void console.warn("element is required for reCAPTCHA v2");window.grecaptcha.ready((()=>{this.widgetID=window.grecaptcha.render(this.element,{sitekey:this.sitekey,callback:this.onVerified,"expired-callback":this.onExpired})}))}else"v3"===this.version&&await window.grecaptcha.ready((async()=>{const e=PRHelper.getHTML(),t=await window.grecaptcha.execute(this.sitekey,{action:this.action}),i=e.getElement("input",this.element);e.isElement(i)&&e.setValue(i,t),this.onVerified(t)}))}reset(){"v2"===this.version&&null!==this.widgetID&&("function"==typeof this.onReset&&this.onReset(this.element),window.grecaptcha.reset(this.widgetID))}}window.RecaptchaModule=e})();